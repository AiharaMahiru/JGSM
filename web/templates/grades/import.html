{% extends "base.html" %}

{% block title %}导入成绩数据 - 学生管理系统{% endblock %}

{% block content %}
<div class="card shadow">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="fas fa-file-import"></i> 导入成绩数据</h5>
        <a href="{{ url_for('grade.list') }}" class="btn btn-light btn-sm">
            <i class="fas fa-arrow-left"></i> 返回列表
        </a>
    </div>
    <div class="card-body">
        <div class="alert alert-info">
            <h5><i class="fas fa-info-circle"></i> 导入说明</h5>
            <p>请按照以下步骤导入成绩数据：</p>
            <ol>
                <li>准备CSV格式的成绩数据文件，确保包含必要的字段：学号、课程编号、成绩、学期</li>
                <li>CSV文件的第一行必须是字段名称，例如：<code>学号,课程编号,成绩,学期</code></li>
                <li>选择文件并点击"导入数据"按钮</li>
            </ol>
        </div>

        <form method="post" action="{{ url_for('grade.import_grades') }}" enctype="multipart/form-data">
            <div class="mb-3">
                <label for="file" class="form-label">选择CSV文件</label>
                <input class="form-control" type="file" id="file" name="file" accept=".csv" required>
                <div class="form-text">只支持CSV格式文件</div>
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-upload"></i> 导入数据
                </button>
            </div>
        </form>

        <div class="mt-4">
            <h5 class="border-bottom pb-2 mb-3">CSV模板示例</h5>
            <div class="table-responsive">
                <table class="table table-sm table-bordered">
                    <thead class="table-light">
                        <tr>
                            <th>学号</th>
                            <th>课程编号</th>
                            <th>成绩</th>
                            <th>学期</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>20250001</td>
                            <td>CS101</td>
                            <td>85</td>
                            <td>2025-2026学年第一学期</td>
                        </tr>
                        <tr>
                            <td>20250002</td>
                            <td>CS101</td>
                            <td>92</td>
                            <td>2025-2026学年第一学期</td>
                        </tr>
                        <tr>
                            <td>20250001</td>
                            <td>MA102</td>
                            <td>78</td>
                            <td>2025-2026学年第一学期</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="d-grid gap-2 d-md-flex justify-content-md-start mt-3">
                <a href="#" class="btn btn-outline-secondary btn-sm">
                    <i class="fas fa-download"></i> 下载CSV模板
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}